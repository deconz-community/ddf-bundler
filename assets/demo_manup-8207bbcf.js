import{r as d,w as x,a as F,o as w,c as S,b as v,d as f,e as h,V as g,f as y,u as s,v as C,g as A,i as V,h as k,j as U,k as B,l as m}from"./index-c21ac6ed.js";const N=m("p",null,"This is a small HTML/JS to test reading the RIFF based DDF bundle.",-1),T=m("p",null,[f(" Following shows the bundle "),m("strong",null,"DESC"),f(" chunk content, which is a JSON object."),m("br"),f(" As an example the unique SHA256 hash is calculated over the bundle. ")],-1),E={__name:"demo_manup",setup(H){const l=d(""),r=d([]),u=d({}),o=d("");function p(a,e){return String.fromCharCode(a.getUint8(e+0),a.getUint8(e+1),a.getUint8(e+2),a.getUint8(e+3))}function D(a,e){return a.getUint32(e,!0)}function _(a){return new TextDecoder().decode(a)}async function b(a){const e=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(e)).map(i=>i.toString(16).padStart(2,"0")).join("")}return x(r,async()=>{if(l.value="",u.value={},o.value="",r.value.length!==1)return;const e=await r.value[0].arrayBuffer(),n=new DataView(e);let t=0,i=0;if(p(n,t)!=="RIFF"){l.value="not a RIFF file";return}if(t+=4,t+=4,p(n,t)!=="DDFB"){l.value="not a DDF bundle file";return}if(t+=4,p(n,t)!=="DESC"){l.value="not a DESC section not found";return}t+=4,i=D(n,t),t+=4;try{let c=n.buffer.slice(t,t+i);c=_(c),u.value=JSON.parse(c),o.value=await b(e)}catch{l.value="failed to parse DESC chunk JSON"}}),(a,e)=>{const n=F("json-viewer");return w(),S(B,{width:"100%",class:"ma-2"},{title:v(()=>[f(" DDF Bundle ")]),text:v(()=>[h(g,{class:"ma-2"},{default:v(()=>[N,T]),_:1}),y(h(g,{class:"ma-2",type:"error",title:"Error",text:s(l)},null,8,["text"]),[[C,s(l)]]),h(A,{modelValue:s(r),"onUpdate:modelValue":e[0]||(e[0]=t=>V(r)?r.value=t:null),label:"Select .ddf file:",accept:".ddf"},null,8,["modelValue"]),s(u)?(w(),S(n,{key:0,value:s(u),"expand-depth":3},null,8,["value"])):k("",!0),h(U,{modelValue:s(o),"onUpdate:modelValue":e[1]||(e[1]=t=>V(o)?o.value=t:null),label:"SHA256",readonly:""},null,8,["modelValue"])]),_:1})}}};export{E as default};
